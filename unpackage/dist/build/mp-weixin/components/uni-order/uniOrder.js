(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/uni-order/uniOrder"],{"0f78":function(t,e,a){"use strict";a.r(e);var n=a("16d4"),i=a("a53f");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("3ec2");var s,o=a("f0c5"),c=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"0d8790f0",null,!1,n["a"],s);e["default"]=c.exports},"16d4":function(t,e,a){"use strict";var n,i=function(){var t=this,e=t.$createElement,a=(t._self._c,t.__map(t.newsList,(function(e,a){var n=t.__map(t.dailyList,(function(e,a){var n=t._f("priceFormat")(e.BILL_LEFTMONEY,2,"￥",!0),i=t._f("priceFormat")(400,2,"￥",!0),r=t._f("priceFormat")(100,2,"￥",!0);return{$orig:t.__get_orig(e),f0:n,f1:i,f2:r}}));return{$orig:t.__get_orig(e),l0:n}}))),n=t._f("priceFormat")(t.sales,2,"￥",!0);t.$mp.data=Object.assign({},{$root:{l1:a,f3:n}})},r=[];a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}))},"211a":function(t,e,a){},"3ec2":function(t,e,a){"use strict";var n=a("211a"),i=a.n(n);i.a},a18e:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("4795"));i(a("6494"));function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,a,n,i,r,s){try{var o=t[r](s),c=o.value}catch(u){return void a(u)}o.done?e(c):Promise.resolve(c).then(n,i)}function s(t){return function(){var e=this,a=arguments;return new Promise((function(n,i){var s=t.apply(e,a);function o(t){r(s,n,i,o,c,"next",t)}function c(t){r(s,n,i,o,c,"throw",t)}o(void 0)}))}}var o={components:{},props:{scrollHeight:{type:[Number,String],default:function(){return 0}},orderQuerry:{type:Object,default:function(){return{key:!1}}},maskTop:{type:String,default:function(){return""}},fparams:{type:Object,default:function(){return{}}}},data:function(){return{tabBars:[{id:0,name:"全部",isTrue:!0},{id:1,name:"已结清",isTrue:!1},{id:2,name:"未结清",isTrue:!1}],dailyList:[],dailyInfo:[{},{},{}],tabIndex:0,orderList:{allData:[],clear:[],notClear:[]},newsList:[],pageLarge:{nowIndexA:0,nowIndexB:0,nowIndexC:0},pageMaxSize:{pageA:-1,pageB:-1,pageC:-1},nowInfo:{nowIndex:0,maxSize:-1},allCheck:!1,orderNums:0,zMask:!1,prepay_id:"",pageSettlement:0}},methods:{displayMore:function(t){this.dailyList.some((function(e){if(e.BILL_CODE==t)return e.isShow=!e.isShow,!0}))},refresh:function(){var e=this;return s(n.default.mark((function a(){var i;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(e.nowInfo.maxSize>=e.nowInfo.nowIndex||-1==e.nowInfo.maxSize)){a.next=8;break}return e.addPageInfo(),a.next=4,e.wrquest(e.params);case 4:i=a.sent,e.setDisplayData(i),a.next=10;break;case 8:return t.showToast({title:"到底了",icon:"none"}),a.abrupt("return");case 10:case"end":return a.stop()}}),a)})))()},changeCheckStatu:function(t){this.dailyList=this.dailyList.map((function(e){return e.BILL_CODE==t&&(e.isTrue=!e.isTrue),e}))},setDisplayData:function(t){var e=this.returnAppendCheckBox(t);switch(this.dailyList=this.dailyList.concat(e),this.tabIndex){case 0:this.orderList.allData=this.dailyList.concat(t);break;case 1:this.orderList.clear=this.dailyList.concat(t);break;case 2:this.orderList.notClear=this.dailyList.concat(t);break;default:break}},addPageInfo:function(){switch(this.tabIndex){case 0:this.nowInfo.nowIndex=this.pageLarge.nowIndexA=this.pageLarge.nowIndexA+1,this.nowInfo.maxSize=this.pageMaxSize.pageA;break;case 1:this.nowInfo.nowIndex=this.pageLarge.nowIndexB=this.pageLarge.nowIndexB+1,this.nowInfo.maxSize=this.pageMaxSize.pageB;break;case 2:this.nowInfo.nowIndex=this.pageLarge.nowIndexC=this.pageLarge.nowIndexC+1,this.nowInfo.maxSize=this.pageMaxSize.pageC;break;default:break}},setPageInfo:function(){switch(this.tabIndex){case 0:this.nowInfo.nowIndex=this.pageLarge.nowIndexA,this.nowInfo.maxSize=this.pageMaxSize.pageA;break;case 1:this.nowInfo.nowIndex=this.pageLarge.nowIndexB,this.nowInfo.maxSize=this.pageMaxSize.pageB;break;case 2:this.nowInfo.nowIndex=this.pageLarge.nowIndexC,this.nowInfo.maxSize=this.pageMaxSize.pageC;break;default:break}},setMaxPage:function(t){switch(this.tabIndex){case 0:this.nowInfo.maxSize=this.pageMaxSize.pageA=parseInt(t/8);break;case 1:this.nowInfo.maxSize=this.pageMaxSize.pageB=parseInt(t/8);break;case 2:this.nowInfo.maxSize=this.pageMaxSize.pageC=parseInt(t/8);break;default:break}},someInit:function(){this.pageLarge={nowIndexA:0,nowIndexB:0,nowIndexC:0},this.pageMaxSize={pageA:-1,pageB:-1,pageC:-1},this.nowInfo={nowIndex:0,maxSize:0},this.pageSettlement&&(this.params.STATUS="2"),this.changeType(0),this.tabIndex=0,this.dailyList=[],this.orderList.allData=this.orderList.clear=this.orderList.notClear=[]},changeType:function(t){2==this.tabIndex?this.$emit("changeScrollHeight",{type:!0,height:70}):this.$emit("changeScrollHeight",{type:!1,height:70}),this.tabBars.forEach((function(e){e.isTrue=!1,e.id==t&&(e.isTrue=!0)}))},ontabtap:function(t){var e=parseInt(t.target.dataset.current||t.currentTarget.dataset.current);this.tabIndex=e},ontabchange:function(t){var e=parseInt(t.target.current||t.detail.current);this.tabIndex=e,this.setPageInfo(),this.changeType(e),this.params.STATUS=e,this.setOrderList(e,this.params)},changeScreen:function(t){var e=t.data1,a=t.data2;this.someInit(),0!=e.length&&this.packageData1(e),0!=a.length&&this.packageData2(a),this.queryData()},packageData1:function(t){var e=this;t.forEach((function(t){if(102==t.id){e.params.BEGINDATE=t.times.statrTime;var a=t.times.endTime,n=[];n=a.split("-"),n[2]=parseInt(n[2])+1,e.params.ENDDATE=n.join("-")}}))},wrquest:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params;return this.params.PAGE_INDEX=this.nowInfo.nowIndex,t.showLoading({title:"加载中..."}),new Promise((function(n,i){t.request({url:"https://cloud.fydlsoft.com/transit_server?interface_add=http://111.67.204.75:7798/cs/query",method:"GET",data:{token:"3E009AA849C840D187E53EF71A67CDC4",params:encodeURIComponent(JSON.stringify(a))},success:function(a){0==a.data.status?(e.setMaxPage(a.data.total),n(a.data.data)):i(t.showToast({title:"异常",icon:"none"}))},fail:function(e){t.showToast({title:"网络异常",icon:"none"})},complete:function(e){t.hideLoading()}})}))},queryData:function(){var t=arguments,e=this;return s(n.default.mark((function a(){var i;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:e.params,a.next=3,e.wrquest(i);case 3:e.dailyList=a.sent,e.orderList.allData=e.dailyList,e.appendCheckBox();case 6:case"end":return a.stop()}}),a)})))()},returnAppendCheckBox:function(t){return t.forEach((function(t,e){t.isTrue=!1,t.isShow=!1})),t},appendCheckBox:function(){var t=this;0!=this.dailyList.length&&this.dailyList.forEach((function(e,a){t.$set(t.dailyList[a],"isTrue",!1),t.$set(t.dailyList[a],"isShow",!1)}))},pullRefresh:function(){this.params.PAGE_INDEX=0,this.queryData()},jqueyForCustomer:function(t){var e=this;this.pageSettlement=t.type,0==t.type?[1].forEach((function(){e.newsList.push(t)})):[1,2,3].forEach((function(){e.newsList.push(t)})),this.queryData()},pay:function(){var e=this;return s(n.default.mark((function a(){var i,r;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.beforeWXpay("https://proxy.fydlsoft.com").catch((function(){return{state:500}}));case 2:if(i=a.sent,200!=i.statusCode){a.next=7;break}e.WXpay(i.data),a.next=16;break;case 7:if(404!=i.statusCode){a.next=15;break}return t.showToast({title:"启用备用域名",icon:"none"}),a.next=11,e.beforeWXpay("https://cloud1.fydlsoft.com").catch((function(){return{state:500}}));case 11:r=a.sent,200==r.statusCode?e.WXpay(r.data):t.showToast({title:"网络异常请稍后重试",icon:"none"}),a.next=16;break;case 15:t.showToast({title:"网络异常请稍后重试",icon:"none"});case 16:case"end":return a.stop()}}),a)})))()},beforeWXpay:function(e){return t.showLoading({title:"发起支付中..."}),new Promise((function(a,n){wx.login({success:function(i){var r=i.code;t.request({url:e+"/unifiedorder",method:"POST",data:{total_fee:"0.01",code:r},success:function(t){a(t)},fail:function(e){t.showToast({title:"请求失败错误码201",icon:"none"}),n()}})}})}))},WXpay:function(e){t.requestPayment({provider:"wxpay",timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,success:function(e){t.showLoading({title:"支付结果查询中..."}),"requestPayment:ok"==e.errMsg&&t.showToast({title:"支付成功",icon:"success"})},fail:function(e){t.showToast({title:"支付已取消",icon:"none"})},complete:function(){t.hideLoading()}})},setOrderList:function(){var t=arguments,e=this;return s(n.default.mark((function a(){var i,r;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=t.length>0&&void 0!==t[0]?t[0]:-1,r=t.length>1?t[1]:void 0,a.t0=i,a.next=-1===a.t0?5:0===a.t0?11:1===a.t0?20:2===a.t0?29:38;break;case 5:return a.next=7,e.wrquest(r);case 7:return e.orderList.allData=a.sent,e.dailyList=e.orderList.allData,e.appendCheckBox(),a.abrupt("break",39);case 11:if(0!=e.orderList.allData.length){a.next=18;break}return a.next=14,e.wrquest(r);case 14:e.orderList.allData=a.sent,e.dailyList=e.orderList.allData,a.next=19;break;case 18:e.dailyList=e.orderList.allData;case 19:return a.abrupt("break",39);case 20:if(0!=e.orderList.clear.length){a.next=27;break}return a.next=23,e.wrquest(r);case 23:e.orderList.clear=a.sent,e.dailyList=e.orderList.clear,a.next=28;break;case 27:e.dailyList=e.orderList.clear;case 28:return a.abrupt("break",39);case 29:if(0!=e.orderList.notClear.length){a.next=36;break}return a.next=32,e.wrquest(r);case 32:e.orderList.notClear=a.sent,e.dailyList=e.orderList.notClear,a.next=37;break;case 36:e.dailyList=e.orderList.notClear;case 37:return a.abrupt("break",39);case 38:return a.abrupt("break",39);case 39:e.appendCheckBox();case 40:case"end":return a.stop()}}),a)})))()}},created:function(){},computed:{params:{set:function(){return{}},get:function(){return this.fparams}},num:{set:function(){return 0},get:function(){if(0==this.pageSettlement)return this.dailyList.length;var t=0;return this.dailyList.forEach((function(e){e.isTrue&&t++})),t}},sales:{set:function(){return 0},get:function(){var t=this,e=0;return this.dailyList.forEach((function(a){0==t.pageSettlement?e+=Math.abs(parseFloat(a.BILL_LEFTMONEY)):a.isTrue&&(e+=Math.abs(parseFloat(a.BILL_LEFTMONEY)))})),e}}}};e.default=o}).call(this,a("543d")["default"])},a53f:function(t,e,a){"use strict";a.r(e);var n=a("a18e"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/uni-order/uniOrder-create-component',
    {
        'components/uni-order/uniOrder-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("0f78"))
        })
    },
    [['components/uni-order/uniOrder-create-component']]
]);
