(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"56a9":function(e,t,n){"use strict";n.r(t);var r=n("8268"),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=a.a},"743f":function(e,t,n){"use strict";var r,a=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r}))},8268:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n("4795")),a=o(n("dac3"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,r,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void n(c)}i.done?t(u):Promise.resolve(u).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){s(o,r,a,i,u,"next",e)}function u(e){s(o,r,a,i,u,"throw",e)}i(void 0)}))}}var u=function(){Promise.all([n.e("common/vendor"),n.e("components/uni-order/uniOrder")]).then(function(){return resolve(n("8e5b"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("components/uni-often/uni-often").then(function(){return resolve(n("b3b5"))}.bind(null,n)).catch(n.oe)},f={components:{uniOrder:u,oftenQuery:c},data:function(){return{searchData:"",scrollHeight:0,topItems:[{name:"综合排序",typeId:101},{name:"日期",typeId:102}],chooseData:{data1:[],data2:[]},orderId:"",params:{},pageSettlement:2,costScrollHeight:"",dbname:"",optionsData:""}},onLoad:function(t){var n=this;e.getSystemInfo({success:function(e){n.scrollHeight=e.windowHeight-50-40-31+"px"}}),this.costScrollHeight=this.scrollHeight;var r=e.getStorageSync("token");this.optionsData={q:t},r?this.loginThenJquery():e.navigateTo({url:"../../pages/index/login"})},methods:{loginThenJquery:function(){var t=this,n=this.optionsData.q,r={},a=JSON.parse(e.getStorageSync("userInfo")).personId;void 0!=n.data?(r=JSON.parse(n.data),"object"==typeof r?r.params.PartnerId==a?1!=r.type&&2!=r.type||(this.params={QUERY_ID:1,BEGINDATE:r.params.BEGINDATE||"1900-01-01",ENDDATE:r.params.ENDDATE||this.wpublic.getDay(1),PartnerId:r.params.PartnerId||"",Status:r.params.STATUS||0,PAGE_SIZE:8,PAGE_INDEX:0},this.$nextTick((function(){this.$refs.uniOrder.jqueyForCustomer()}))):(this.pageSettlement=1,e.showToast({title:"不是您的专属分享链接,3秒后为您自动查询",icon:"none",duration:3e3}),this.params={QUERY_ID:1,BEGINDATE:"1900-01-01",ENDDATE:this.wpublic.getDay(1),PartnerId:a,Status:0,PAGE_SIZE:8,PAGE_INDEX:0},setTimeout((function(){t.$refs.uniOrder.jqueyForCustomer()}),3e3)):(this.pageSettlement=1,e.showToast({title:"参数错误",icon:"none",duration:3e3}))):""!=a?(this.params={QUERY_ID:1,BEGINDATE:"1900-01-01",ENDDATE:this.wpublic.getDay(1),PartnerId:a,Status:0,PAGE_SIZE:8,PAGE_INDEX:0},setTimeout((function(){t.$refs.uniOrder.jqueyForCustomer()}),3e3)):(this.pageSettlement=-1,this.data="用户ID错误或不存在"+a)},changeScrollHeight:function(e){var t=this.scrollHeight.replace("px","");this.scrollHeight=e.type?parseInt(t)-e.height+"px":this.costScrollHeight},showDrawer:function(){this.$refs.morequery.show()},clickSure:function(e){var t=[];e.forEach((function(e){0!=Object.keys(e.cont).length&&t.push(e)})),this.chooseData.data2=t,this.$refs.uniOrder.changeScreen(this.chooseData)},childQuery:function(e){var t=this,n=[];e.forEach((function(e,r){if(1!=r)""!=e.cont&&n.push(e);else if(0!=Object.keys(e.times).length||""!=e.cont){var a=0,o="";if(""!=e.cont){if("本周"==e.cont){var s="0123456".charAt((new Date).getDay());o=t.wpublic.getDayFor(s)}else{switch(e.cont){case"今天":a=0;break;case"7天":a=-7;break;case"30天":a=-30;break;default:break}o=t.wpublic.getDay(a)}e.times["statrTime"]=o,e.times["endTime"]=(new Date).toISOString().slice(0,10)}n.push(e)}})),this.chooseData.data1=n,this.$refs.uniOrder.changeScreen(this.chooseData)},someInit:function(){var t=e.getStorageSync("userInfo"),n=e.getStorageSync("personName");if(t)if(t=JSON.parse(t),""==t.userName||""==t.userPassword)e.navigateTo({url:"../../pages/index/login"});else{var r=e.getStorageSync("token")||"",a={userName:t.userName,userPassword:t.userPassword,dbname:t.dbname||"",url:t.url,personName:n,personId:t.personId,port:t.port||7798};this.$store.commit("changeLoginParams",a),this.$store.commit("changeLoginToken",r)}else e.navigateTo({url:"../../pages/index/login"})},scan:function(){var t=this;return i(r.default.mark((function n(){var o,s;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.default.ownScan();case 2:if(o=n.sent,s=t.isResult(o),!s){n.next=7;break}return e.showToast({title:"不是咱家二维码哟",icon:"none"}),n.abrupt("return");case 7:e.navigateTo({url:"../../pages/order/scanOrder?data="+JSON.stringify(o)});case 8:case"end":return n.stop()}}),n)})))()},isResult:function(e){var t=!0;return"object"==typeof e&&4==e.type&&e.params&&e.params.hasOwnProperty("PartnerId")&&e.params.hasOwnProperty("SessionId")&&(t=!1),t},pullRefresh:function(){this.$refs.uniOrder.pullRefresh()}},onPullDownRefresh:function(){var t=this;return i(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$refs.uniOrder.pullRefresh();case 2:e.stopPullDownRefresh();case 3:case"end":return n.stop()}}),n)})))()},created:function(){var t=this;this.someInit(),e.$on("update",(function(){t.loginThenJquery()}))},computed:{companyName:{get:function(){return this.$store.state.loginParams.personName},set:function(){return"未知用户"}}}};t.default=f}).call(this,n("543d")["default"])},a7da:function(e,t,n){"use strict";var r=n("e5619"),a=n.n(r);a.a},a8fe:function(e,t,n){"use strict";n.r(t);var r=n("743f"),a=n("56a9");for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("a7da");var s,i=n("f0c5"),u=Object(i["a"])(a["default"],r["b"],r["c"],!1,null,"8cf01274",null,!1,r["a"],s);t["default"]=u.exports},de1c:function(e,t,n){"use strict";(function(e){n("8424");r(n("66fd"));var t=r(n("a8fe"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},e5619:function(e,t,n){}},[["de1c","common/runtime","common/vendor"]]]);